üß† PROMPT PARA REPLIT
Ya tengo creada en Supabase la tabla public.organization_activity_logs y la funci√≥n p√∫blica log_activity().

### Tabla: organization_activity_logs
Campos:
- id (uuid, PK)
- organization_id (uuid)
- user_id (uuid)
- action (text)
- target_table (text)
- target_id (uuid, opcional)
- metadata (jsonb)
- created_at (timestamp)

### Funci√≥n: log_activity()
Recibe:
- p_organization_id
- p_user_id
- p_action
- p_target_table
- p_target_id (opcional)
- p_metadata (jsonb, opcional)

Inserta autom√°ticamente un nuevo registro en organization_activity_logs con toda esta informaci√≥n.

---

### üéØ Tu tarea en el FRONTEND y BACKEND

1Ô∏è‚É£ **Integrar los llamados a log_activity()** en todos los puntos donde ocurren acciones importantes del usuario:
   - Crear contacto ‚Üí action: 'CREATE_CONTACT'
   - Actualizar contacto ‚Üí action: 'UPDATE_CONTACT'
   - Crear movimiento ‚Üí action: 'CREATE_MOVEMENT'
   - Actualizar tarea ‚Üí action: 'UPDATE_TASK'
   - Borrar registro ‚Üí action: 'DELETE_[TABLA]'
   - Cambiar plan ‚Üí action: 'UPDATE_PLAN'

2Ô∏è‚É£ **Cada vez que se realice una acci√≥n exitosa**, ejecutar:
   ```ts
   await supabase.rpc('log_activity', {
     p_organization_id: currentOrganization.id,
     p_user_id: currentUser.id,
     p_action: 'CREATE_CONTACT', // din√°mico seg√∫n el caso
     p_target_table: 'contacts',
     p_target_id: createdContact.id,
     p_metadata: { name: createdContact.full_name, email: createdContact.email }
   })


(Si no hay datos adicionales, simplemente no env√≠es p_metadata.)

3Ô∏è‚É£ Mostrar los registros de actividad en una nueva secci√≥n ‚ÄúActividad‚Äù dentro del panel de la organizaci√≥n:

Fuente: organization_activity_logs_view

Columnas visibles: usuario, acci√≥n, fecha/hora, target_table, metadata.

Ordenar por created_at desc.

Mostrar el avatar del usuario (users.avatar_url) y su nombre (users.full_name).

4Ô∏è‚É£ Dise√±o UI sugerido:

Estilo compacto tipo Notion Activity Feed.

Iconos: Plus para creaciones, Edit para actualizaciones, Trash para borrados.

Tooltip al pasar el mouse mostrando detalles de metadata.

5Ô∏è‚É£ Importante:

No crear ni modificar funciones en Supabase (ya est√° todo hecho).

Solo conectar los puntos del backend y UI para registrar y mostrar las acciones.

El resultado esperado:
Cada vez que un usuario haga algo relevante (crear, editar, borrar, etc.), autom√°ticamente se registra en Supabase y aparece en el panel de ‚ÄúActividad reciente‚Äù de la organizaci√≥n, con nombre, avatar, acci√≥n y hora.