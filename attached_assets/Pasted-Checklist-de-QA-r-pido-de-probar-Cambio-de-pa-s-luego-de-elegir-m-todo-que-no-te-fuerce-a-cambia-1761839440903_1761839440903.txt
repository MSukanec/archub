Checklist de QA (rápido de probar)

Cambio de país luego de elegir método: que no te fuerce a cambiar el método elegido; solo reordena la lista.

CTA deshabilitado hasta que:

haya método seleccionado,

estén tildados Términos y Privacidad,

Nombre/Email/País sean válidos.

Accesibilidad:

Radio buttons de métodos con role="radio" y aria-checked,

El CTA anuncia errores con aria-live.

Mobile: que el resumen no tape el CTA y haya scroll suave al error.

Persistencia: si refrescás la página, se mantiene país, método y consents (Zustand persist).

Moneda en resumen: ARS cuando el método es MP; USD cuando es PayPal (como tenés).

Analytics mínimos (si ya tenés un dispatcher):

payment_method_selected,

checkout_cta_clicked (con {method, country}).

Edge: usuario con apellido vacío (un solo nombre) debe poder pagar.

Micro-UX que suma conversión (sin tocar estructura)

Etiqueta del método: agregá un chip discreto al lado del título

MP → “Pago en ARS”

PayPal → “Pago en USD”

Trust cues cortitos bajo el CTA: “Pago seguro y encriptado” (ya lo tenés), “Acceso inmediato”.

Atajo de teclado: tecla Enter dispara el CTA si todo está válido.

Si país = no LATAM, poné PayPal preseleccionado (si no hay selección previa).

Prompt breve para Replit (solo cableado del CTA → orden/pago)

Usar tus endpoints existentes. No crear nada nuevo. Si ya lo tenés, simplemente que verifique estos puntos.

En CheckoutPage:

Asegurate que el CTA:

Si no existe order_id, llama POST /api/orders/create con:

{
  "items": [{"type":"course","id":"<course_id>","qty":1}],
  "buyer_identity": {first_name,last_name,email,country_id,phone_e164},
  "consents": {accept_terms,accept_privacy,marketing_opt_in},
  "currencyPreferred": (selectedPayment === 'mercadopago' ? 'ARS' : 'USD')
}


→ guarda order_id que devuelva.

Luego, según método:

MP: POST /api/payments/mercadopago/create con {order_id}, redirigir a init_point.

PayPal: POST /api/payments/paypal/create con {order_id}, redirigir a approve_link.

Transferencia: POST /api/payments/bank/create con {order_id}, mostrar modal/instrucciones o redirigir a tu pantalla de comprobante.

Deshabilitar CTA con isLoading mientras hace esas llamadas.

On error: toast con mensaje y focus al CTA.

En la sección de métodos:

No cambies nada de lo ya hecho; solo añadí el chip de moneda (ARS/ USD) en la tarjeta de cada método, leyendo selectedPayment.