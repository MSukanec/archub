## Objetivo

Aplicar mejoras en la p√°gina `ConstructionGallery.tsx` para corregir un bug en la navegaci√≥n de im√°genes y refinar algunos aspectos visuales y de datos.

---

## 1. üêû Corregir bug de navegaci√≥n en el lightbox (`prev` / `next`)

Actualmente, al navegar entre archivos en el modal, se usa `filteredFiles[currentIndex]` **antes** de actualizar el √≠ndice, lo que causa un error visual.

üîß Reemplazar la funci√≥n `navigateImage` por esta:

```ts
const navigateImage = (direction: 'prev' | 'next') => {
  const newIndex = direction === 'prev'
    ? (currentIndex > 0 ? currentIndex - 1 : filteredFiles.length - 1)
    : (currentIndex < filteredFiles.length - 1 ? currentIndex + 1 : 0);

  setCurrentIndex(newIndex);
  setSelectedFile(filteredFiles[newIndex]);
};
2. üßç Mostrar correctamente el avatar del creador en la galer√≠a y en el modal
Actualmente se renderiza un c√≠rculo gris. Si file.site_log.creator.avatar_url existe, debe usarse para mostrar el avatar.

üîß Reemplazar:

tsx
Copiar
Editar
<div className="w-4 h-4 rounded-full bg-muted flex-shrink-0"></div>
por:

tsx
Copiar
Editar
<img
  src={file.site_log.creator.avatar_url || '/placeholder.svg'}
  alt={file.site_log.creator.full_name}
  className="w-4 h-4 rounded-full object-cover"
/>
Tambi√©n aplicarlo en el modal (donde ahora tambi√©n se ve vac√≠o).

3. üìÅ Usar file.original_name directamente
En la transformaci√≥n de datos, ya se guarda file_name en la tabla site_log_files. Entonces no hace falta extraerlo de file_url.

üîß Asegurate de usar file.original_name directamente para:

Mostrar nombre del archivo (si se hace en alg√∫n lugar)

Usarlo como download name en el bot√≥n de descarga

4. (opcional) Mejorar UX al cambiar de proyecto
Agregar un useEffect que resetea los filtros filterType y filterDate cuando cambia projectId, para evitar filtros obsoletos.

Ejemplo:

ts
Copiar
Editar
useEffect(() => {
  setFilterType('all');
  setFilterDate('all');
}, [projectId]);
Resultado esperado
El modal de galer√≠a permite navegar correctamente entre archivos.

Los avatares de los usuarios se muestran cuando est√°n disponibles.

La informaci√≥n del archivo es m√°s precisa.

UX general m√°s coherente y fluida.