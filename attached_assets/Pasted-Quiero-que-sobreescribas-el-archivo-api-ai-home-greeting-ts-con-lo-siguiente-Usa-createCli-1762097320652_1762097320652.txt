Quiero que sobreescribas el archivo `/api/ai/home_greeting.ts` con lo siguiente:

âœ… Usa `createClient` de Supabase para obtener datos del usuario (nombre completo, Ãºltimos cursos vistos, proyectos activos, etc.)
âœ… Llama a GPT-4o con un prompt que diga algo como:

SYSTEM: "Sos Archubita, la asistente virtual de Archub. Saluda y recomendÃ¡ 2 o 3 cosas Ãºtiles para hacer hoy, en base al contexto."
USER: "Hoy es {fecha}. El usuario se llama {nombre}. Su Ãºltimo curso fue {curso}. Su Ãºltimo presupuesto fue {presupuesto}. Hoy tiene una reuniÃ³n a las {hora}. Â¿QuÃ© le recomiendas hacer?"

âœ… Usa el endpoint `https://api.openai.com/v1/chat/completions` con modelo `gpt-4o`
âœ… Devuelve un JSON como:

```ts
{
  greeting: "Â¡Buen dÃ­a Mati! ğŸ‘‹ Hoy es jueves, ideal para avanzar con el presupuesto de la obra...",
  suggestions: [
    { label: "Seguir curso 'Modelado BIM 2'", action: "/learning/modelado-bim-2" },
    { label: "Ver presupuesto de Casa Esquina", action: "/projects/casa-esquina/estimates" },
    { label: "Crear nuevo movimiento financiero", action: "/finanzas/movimientos/nuevo" }
  ]
}
âœ… Si no puede obtener sugerencias, devuelve un fallback:

ts
Copiar cÃ³digo
{
  greeting: "Â¡Hola, MatÃ­as Esteban! Â¿CÃ³mo estÃ¡s hoy?",
  suggestions: []
}
âœ… UsÃ¡ Bearer token del usuario para obtener user_id, luego fetch a Supabase (users, projects, courses, etc.)

âœ… AgregÃ¡ control de errores, manejo de modo offline y que no explote si algÃºn dato falta.

âœ… Si querÃ©s, registrÃ¡ el uso en las tablas ia_messages e ia_usage_logs (pero que no bloquee si falla).

Este endpoint ya estÃ¡ conectado desde el frontend, asÃ­ que todo lo que devuelva se verÃ¡ en pantalla. UsÃ¡ TypeScript.

No agregues rutas nuevas, solo actualizÃ¡ este endpoint.

yaml
Copiar cÃ³digo

---

### ğŸ“¸ Resultado esperado en frontend

Una vez que Replit lo haga bien, vas a ver algo asÃ­ al entrar a Home:

Â¡Buen dÃ­a, Mati! ğŸ‘‹
Hoy podÃ©s continuar el curso â€œRenderizado Profesionalâ€, revisar el presupuesto de â€œCasa PHâ€ o cargar un nuevo movimiento financiero.

[â–¶ï¸ Continuar curso]
[ğŸ“Š Revisar presupuesto]
[â• Cargar movimiento]

yaml
Copiar cÃ³digo

Todo eso lo va a decidir la IA segÃºn el contexto real.