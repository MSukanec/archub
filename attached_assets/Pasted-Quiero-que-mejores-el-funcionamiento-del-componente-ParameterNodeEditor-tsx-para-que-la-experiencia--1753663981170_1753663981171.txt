Quiero que mejores el funcionamiento del componente ParameterNodeEditor.tsx para que la experiencia de edici√≥n visual de nodos param√©tricos sea clara, fluida y sin bugs. Ac√° te explico bien lo que necesito:

‚úÖ Contexto General
Estoy desarrollando un sistema que permite al usuario crear tareas param√©tricas mediante un editor visual tipo canvas. Cada tarea se genera combinando opciones de distintos par√°metros conectados entre s√≠ (por ejemplo: tipo de tarea, tipo de muro, tipo de mortero, etc.).

Cada nodo representa un par√°metro (como ‚ÄúTipo de Tarea‚Äù), y el usuario puede crear un flujo visual conectando par√°metros entre s√≠, eligiendo s√≥lo algunas opciones visibles (por ejemplo, ‚ÄúEjecuci√≥n de Muro‚Äù en vez de mostrar todas las posibles).

üîÅ L√≥gica de Duplicaci√≥n
Cuando el usuario duplica un nodo, no quiero que se cree un nuevo par√°metro real, ni una nueva opci√≥n, ni nada complejo. El objetivo es simplemente que:

Se cree una nueva instancia del mismo par√°metro (parameter_id), con su propio id y position, y que se comporte de forma independiente a nivel visual y de conexiones.

Al duplicar, debe mantener:

las opciones visibles seleccionadas en esa instancia (las copio tal cual)

las conexiones existentes con otros nodos (si es posible)

No debe usar ninguna columna extra como original_parameter_id, esa columna ya fue eliminada.

üóë L√≥gica de Eliminaci√≥n
Cuando se elimina un nodo visual:

Debe eliminarse por completo de task_parameter_positions.

Actualmente hay un bug: aunque se elimina, al moverse el canvas o interactuar, vuelve a aparecer.

Esto pasa porque al guardar la posici√≥n o las conexiones, vuelve a crearse autom√°ticamente el nodo.

Necesito que este comportamiento se corrija: si se elimin√≥ un nodo, no debe volver a generarse autom√°ticamente por ninguna raz√≥n.

‚ö†Ô∏è Bug actual con visibilidad de opciones
Hay un bug cr√≠tico: si el usuario modifica las opciones visibles de un solo nodo, se borran las opciones visibles de todos los dem√°s nodos.

Esto es inaceptable. Cada task_parameter_position debe tener su propio estado de opciones visibles (visible_option_ids) sin afectar a las otras posiciones del mismo par√°metro.

üéØ Objetivo
Necesito que el sistema sea:

Flexible: cada posici√≥n de un par√°metro puede tener sus propias opciones visibles y conexiones.

Estable: sin recreaciones autom√°ticas de nodos borrados.

Escalable: que se puedan duplicar y mover nodos libremente sin generar errores o conflictos.

¬øPod√©s corregir todo eso en ParameterNodeEditor.tsx? Ya ten√©s toda la l√≥gica, s√≥lo hace falta depurar estos detalles para que el flujo sea completamente robusto.

Gracias üôå