Objetivo: Modificar el modal de â€œSubir Documentosâ€ para que:

Ya no permita crear entregas manualmente (sin input ni botÃ³n +).

En su lugar, cree automÃ¡ticamente una nueva entrega (grupo) al hacer submit si el usuario no seleccionÃ³ una entrega existente.

El nombre de la entrega se genere automÃ¡ticamente usando la funciÃ³n generate_next_document_group_name(folder_id) en Supabase.

El usuario sÃ³lo ve un campo opcional para ingresar una descripciÃ³n de la entrega, y un campo para seleccionar una entrega existente (si quiere reutilizarla).

âœ… Cambios en el formulario del modal:
Carpeta (folder_id) â†’ sigue igual.

Grupo/Entrega (group_id) debe:

Mostrar un dropdown con entregas existentes para la carpeta seleccionada.

Ya no debe tener botÃ³n + para crear entrega manual.

Si no se selecciona ninguna entrega, al presionar â€œSubir Documentosâ€:

Se llama a generate_next_document_group_name(folder_id) vÃ­a RPC.

Se crea una nueva fila en design_document_groups con:

folder_id

name = resultado del RPC (ej: v1, v2, etc.)

description = valor del input de descripciÃ³n (nuevo campo opcional)

created_by = auth.user.id

Se usa el id resultante como group_id para los documentos.

Archivos:

Se permite subir mÃºltiples.

Cada uno se inserta como fila en design_documents, con:

group_id, folder_id, file_url, name, created_by

Estado:

Puede mantenerse como dropdown (Pendiente, En revisiÃ³n, Aprobado).

Se guarda en cada documento (o en el grupo si se decide asÃ­).

ğŸ–¼ï¸ UI esperada:
El campo Grupo/Entrega es un select, sin botÃ³n para crear.

Abajo del select, un input opcional de texto: â€œDescripciÃ³n de esta entregaâ€.

Si el usuario no selecciona grupo, se genera uno automÃ¡ticamente al hacer submit.

El usuario nunca ve ni puede escribir el nombre de la entrega (se genera como v1, v2, etc.).

ğŸ”§ Backend RPC (ya creada en Supabase):
Llamar a:

ts
Copiar
Editar
const { data, error } = await supabase.rpc("generate_next_document_group_name", {
  p_folder_id: selectedFolderId
});
Luego insertar la nueva entrega:

ts
Copiar
Editar
const { data: newGroup } = await supabase.from("design_document_groups").insert({
  folder_id: selectedFolderId,
  name: data, // 'v1', 'v2', etc.
  description: form.descripcion,
  created_by: auth.user.id
}).select().single();
Y usar newGroup.id como group_id para los archivos.