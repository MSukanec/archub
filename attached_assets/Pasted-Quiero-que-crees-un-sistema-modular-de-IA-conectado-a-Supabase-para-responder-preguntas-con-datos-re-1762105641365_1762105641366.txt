Quiero que crees un sistema modular de IA conectado a Supabase para responder preguntas con datos reales.

 Objetivo del primer caso: permitirle a la IA responder preguntas como:
> "驴Cu谩nto le pagu茅 a Alejandro en el proyecto Casa Blanca?"

---

 Estructura esperada:

1. Crea una carpeta: `src/ai/tools/`
2. Dentro, crea un archivo `getTotalPayments.ts` con una funci贸n `getTotalPaymentsByContactAndProject(contactName: string, projectName: string): Promise<string>`

  Esta funci贸n debe:
  - Conectarse a Supabase
  - Buscar el `contact_id` correspondiente al contacto cuyo `name` contiene `contactName` (ignorar may煤sculas/min煤sculas)
  - Buscar el `project_id` correspondiente al proyecto cuyo `name` contiene `projectName`
  - Buscar en la tabla `movement_payments` todos los pagos relacionados a ese `contact_id` y `project_id`
  - Sumar el campo `amount` (o `cantidad` si as铆 se llama)
  - Retornar un string como: `"Le pagaste $420.000 a Alejandro en el proyecto Casa Blanca"`

3. Crea un endpoint en `/api/ai/handler.ts` que:
  - Reciba un mensaje del usuario (`req.body.message`)
  - Use `openai.chat.completions` con `model: "gpt-4o"` y el mensaje
  - Registre una funci贸n tool llamada `"getTotalPayments"` con descripci贸n: "Devuelve el monto total pagado a un contacto en un proyecto"
  - Si el modelo responde llamando a `"getTotalPayments"`, ejecutar la funci贸n importando `getTotalPaymentsByContactAndProject(...)` y pasarle los argumentos
  - Volver a enviar la respuesta a `openai.chat.completions` incluyendo el resultado como `tool_message`
  - Devolver la respuesta final en lenguaje humano al frontend

4. Usa `openai.chat.completions` con `"tools"` (antes llamadas `functions`)
  - Importante: respetar el esquema de `tool_call` y `tool_response`

5. No uses librer铆as externas salvo `openai` y `@supabase/supabase-js` (ya instaladas)

6. Todo debe estar modular y preparado para que despu茅s agreguemos m谩s funciones como `crearMovimiento`, `consultarUltimoProyecto`, etc.

---

 Nota: NO generar ning煤n archivo UI ni componente React. Solo l贸gica y endpoint.

Ч Organizaci贸n esperada:
- `src/ai/tools/getTotalPayments.ts` (la funci贸n)
- `api/ai/handler.ts` (el endpoint)

驴Listo para crear? Adelante.
