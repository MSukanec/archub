# ğŸ¯ Objetivo:
Agregar un sistema visual para configurar quÃ© opciones de un parÃ¡metro hijo se muestran dependiendo de la opciÃ³n seleccionada en un parÃ¡metro padre.

## âœ… Contexto:
- Ya existen nodos (parÃ¡metros) conectados entre sÃ­ en un canvas tipo flow.
- La tabla `task_parameter_dependencies` define quÃ© parÃ¡metro es padre y cuÃ¡l es hijo.
- La tabla `task_parameter_dependency_options` (VACÃA actualmente) tiene:
  - `dependency_id` â†’ ID de la dependencia entre dos parÃ¡metros.
  - `child_option_id` â†’ opciÃ³n que se habilita en el parÃ¡metro hijo si se cumple la condiciÃ³n.
- Queremos que el usuario (creador de template) pueda configurar estas condiciones visualmente.

---

## ğŸ§© QuÃ© hacer:

### 1. Cuando el usuario conecta un parÃ¡metro a otro:
- Ya se genera una entrada en `task_parameter_dependencies` (mantener esto como estÃ¡).

### 2. Agregar botÃ³n en cada nodo hijo:
- Si ese nodo tiene parÃ¡metros padre conectados, mostrar un Ã­cono tipo âš™ï¸ o una opciÃ³n llamada **"Configurar visibilidad por opciÃ³n"**.
- Al hacer clic, abrir un modal o panel lateral.

---

## ğŸ”§ Modal: â€œConfigurar Visibilidad por OpciÃ³nâ€

Este modal debe:

1. Leer la `dependency_id` correspondiente (de `task_parameter_dependencies`).
2. Obtener:
   - Las opciones del parÃ¡metro padre (`parent_parameter_id`) â†’ desde `task_parameter_options`.
   - Las opciones del parÃ¡metro hijo (`child_parameter_id`) â†’ tambiÃ©n desde `task_parameter_options`.

3. Renderizar una tabla o matriz asÃ­:

| OpciÃ³n del Padre        | Opciones del Hijo (checkboxes)                   |
|-------------------------|--------------------------------------------------|
| EjecuciÃ³n de Muro       | [ ] Mortero A  [x] Mortero B  [ ] Pegamento      |
| EjecuciÃ³n de Cielorraso | [x] Mortero A  [x] Mortero B  [x] Pegamento      |

4. Cada checkbox marca si esa opciÃ³n del hijo debe estar disponible cuando se elige esa opciÃ³n del padre.

5. Guardar los datos en la tabla `task_parameter_dependency_options`:
   - Por cada combinaciÃ³n permitida â†’ una fila con:
     - `dependency_id`
     - `child_option_id`

---

## ğŸ’¾ Comportamiento posterior:

Cuando se renderiza el parÃ¡metro hijo:
- Solo deben mostrarse las `child_option_id` asociadas al `dependency_id` segÃºn la opciÃ³n actual del padre.

---

## ğŸ¨ EstÃ©tica:
- Seguir estilo actual de los modales.
- Usar `react-hook-form` o el sistema de forms existente.
- Preferiblemente usar un componente visual como tabla o `Accordion` para cada opciÃ³n del padre, con sus checkboxes del hijo.

---

## ğŸ§ª Testing:
- Probar conectando Tipo de Tarea â†’ Tipo de Mortero.
- Configurar visibilidad condicional.
- Verificar que las opciones del hijo se actualicen dinÃ¡micamente al cambiar el valor del padre.

